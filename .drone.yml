---
kind: template
load: test-build.yaml
data:
  type: push
  source_files:
    - 'package*.json'
    - 'tsconfig.json'
    - 'src/**/*.ts'
    - '.config.json'
  dockerfile: docker/Dockerfile
  test_image: node:18.15.0
  test_commands:
    - npm ci
    - npm run test:ci

---
kind: template
load: test-build.yaml
data:
  type: tag
  dockerfile: docker/Dockerfile
  test_image: node:18.15.0
  test_commands:
    - npm ci
    - npm run test:ci

---
kind: template
load: deploy-via-ssh.yaml
data:
  compose_file: docker/compose.home-server.yml
