version: "3.9"

services:
  bot:
    image: 127.0.0.1:5000/linkbot
    build: .
    environment:
      - APP_NAME=linkbot
      - ENV=prod
      - AWS_REGION=us-east-1
    secrets:
      - source: assume_role_linkbot
        target: assume_role
        mode: 0440

    # logging:
    #   driver: awslogs
    #   options:
    #     awslogs-region: us-east-1
    #     awslogs-group: /app/linkbot/docker
    #     awslogs-create-group: true
    #     awslogs-multiline-pattern: "^\S+"
secrets:
  assume_role_linkbot:
    external: true
